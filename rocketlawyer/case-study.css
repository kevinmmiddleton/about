/* ---------------- DARK MODE SECTION TEXT COLOR OVERRIDES ---------------- */

.case-study.dark .section {
  --section-text-color: var(--text-primary-darkmode-strong);
}

.case-study.dark #platform-capabilities,
.case-study.dark #product-walkthrough {
  --section-text-color: var(--text-primary-darkmode);
}

/* ================================
   CASE STUDY — GRADIENT COLOR DEFINITIONS
   These define the section tint colors for the full-page gradient
   Using stronger opacity values to match the tint system in styles.css
   ================================ */
body.case-study {
  --cs-grad-intro-start: rgba(108, 140, 255, 0.22);   /* Light blue */
  --cs-grad-intro: rgba(108, 140, 255, 0.32);         /* Blue */
  --cs-grad-challenge: rgba(140, 130, 255, 0.30);     /* Blue-purple */
  --cs-grad-strategy: rgba(164, 140, 249, 0.28);      /* Light purple */
  --cs-grad-platform: rgba(180, 140, 255, 0.28);      /* Purple */
  --cs-grad-execution: rgba(164, 140, 249, 0.32);     /* Deeper purple */
  --cs-grad-outcomes: rgba(150, 255, 210, 0.30);      /* Mint */
  --cs-grad-challenges: rgba(255, 205, 170, 0.32);    /* Peach */
  --cs-grad-lessons: rgba(255, 235, 140, 0.34);       /* Yellow */
  --cs-grad-testimonials: rgba(150, 255, 210, 0.28);  /* Mint */
}

/* ================================
   CASE STUDY — COLOR STORY GRADIENT
   Full-page gradient that maps semantic tints to each section:
   Hero (white) → Intro (light blue) → Challenge (deeper blue) →
   Strategy (light purple) → Platform (purple) → Walkthrough (neutral) →
   Execution (deeper purple) → Outcomes (mint) → Challenges (peach) →
   Lessons (yellow) → Testimonials (mint) → Footer (neutral)
   ================================ */
body.case-study {
  background: linear-gradient(
    to bottom,
    var(--bg) 0%,                              /* Hero - clean white/neutral */
    var(--cs-grad-intro-start) 4%,             /* Intro start - light blue */
    var(--cs-grad-intro) 8%,                   /* Intro - blue */
    var(--cs-grad-challenge) 14%,              /* Challenge - purple transition */
    var(--cs-grad-strategy) 20%,               /* Strategy - light purple */
    var(--cs-grad-platform) 26%,               /* Platform - purple */
    var(--surface) 34%,                        /* Walkthrough - neutral reset */
    var(--cs-grad-execution) 42%,              /* Execution - deeper purple */
    var(--cs-grad-outcomes) 52%,               /* Outcomes - mint */
    var(--cs-grad-challenges) 64%,             /* Challenges - peach */
    var(--cs-grad-lessons) 76%,                /* Lessons - yellow */
    var(--cs-grad-testimonials) 88%,           /* Testimonials - mint */
    var(--surface) 100%                        /* Footer - neutral */
  ) !important;
  background-repeat: no-repeat;
  background-attachment: scroll;
  min-height: 100vh;
}
/* ================================
   CASE STUDY — CORE LAYOUT
   Clean, production-ready version
   ================================ */

/* --- CASE STUDY HERO ISOLATION (prevents bleed from global .hero + .hero-modern) --- */
.case-study .hero,
.case-study .hero-modern {
  all: unset !important;
  display: block;
}

.case-study .cs-hero {
  position: relative;
  margin-top: 0 !important;
  padding-top: calc(var(--spacing-xl) * 1.2) !important;
  padding-bottom: calc(var(--spacing-xl) * 1.6) !important;
  background:
    radial-gradient(
      circle at top,
      rgba(var(--primary-rgb), 0.08) 0%,
      rgba(var(--primary-rgb), 0.02) 42%,
      transparent 75%
    ) !important;
}

/* ---------------- TYPOGRAPHY + RHYTHM UPGRADE ---------------- */
.case-study p,
.case-study li {
  font-size: 1.05rem;
  line-height: 1.62;
  letter-spacing: 0.1px;
  color: var(--text-primary);
}

.case-study h2.value-title {
  font-size: 2.05rem;
  font-weight: 600;
  line-height: 1.25;
  letter-spacing: -0.35px;
}

.case-study h3,
.case-study .cs-h3 {
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: var(--spacing-sm);
  color: var(--text-primary);
  line-height: 1.35;
}

/* Improve spacing consistency between blocks */
.case-study .cs-section-body > * + * {
  margin-top: var(--spacing-lg);
  padding-top: 0 !important;
  margin-top: 0 !important;
}

.cs-case-label {
    font-size: 0.9rem;
    color: var(--text-secondary);
    margin-bottom: 0.25rem;
}

/* ---- HERO HEADER CENTERING ---- */
.cs-hero-header,
.cs-hero-subtitle,
.cs-hero-client,
.cs-hero-metrics,
.cs-hero-metrics-grid {
  margin-left: auto !important;
  margin-right: auto !important;
  text-align: center;
}

.cs-hero-header {
    max-width: 760px;
    margin: 0 auto;
}

.cs-hero-client {
    font-size: 1.35rem;
    font-weight: 600;
    margin-top: -1.9rem;
    margin-bottom: 0.1rem;
    line-height: 1.1;
    color: var(--text-secondary);
}

.cs-hero-subtitle {
  font-size: 1.2rem;
  margin-top: 0.35rem;
  margin-bottom: var(--spacing-xl);
  color: var(--text-secondary);
  max-width: 720px;
  margin-left: auto;
  margin-right: auto;
}

/* ---------------- HERO METRICS — PREMIUM GLASS ---------------- */
.cs-hero-metrics {
  background: rgba(var(--white-rgb), 0.75) !important;
  backdrop-filter: saturate(180%) blur(26px) !important;
  -webkit-backdrop-filter: saturate(180%) blur(26px) !important;
  border: 1px solid rgba(var(--white-rgb), 0.55) !important;
  box-shadow: var(--shadow-12) !important;
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg) var(--spacing-xl);
  margin-top: var(--spacing-lg);
  margin-bottom: var(--spacing-xl);
}

.cs-hero-metrics-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--spacing-md);
    text-align: center;
}

.cs-metric-value {
    font-size: 1.6rem;
    font-weight: 700;
    color: var(--text-primary);
    line-height: 1.2;
}

.cs-metric-label {
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.cs-hero-meta {
    font-size: 0.9rem;
    margin-top: var(--spacing-sm);
    color: var(--text-secondary);
}

/* ---------------- SECTION HEADERS ---------------- */
.cs-section-header {
    text-align: center;
    margin-bottom: var(--spacing-xl);
    margin-top: var(--spacing-lg);
    padding-bottom: var(--spacing-sm);
}

.cs-section-eyebrow {
    font-size: 0.9rem;
    color: var(--text-secondary);
    margin-top: 0.25rem;
    margin-bottom: var(--spacing-xs);
}

.cs-section-intro {
  max-width: 720px;
  margin: var(--spacing-md) auto calc(var(--spacing-xl) * 1.4);
  font-size: 1.08rem;
  font-weight: 400;
  letter-spacing: 0.25px;
  line-height: 1.65;
  color: var(--text-secondary);
  text-align: center;
}

/* ---------------- TWO COLUMN LAYOUT ---------------- */
.cs-two-col-divider {
  max-width: 900px;
  margin: 0 auto var(--spacing-lg);
  height: 1px;
  background: rgba(var(--white-rgb), 0.35);
}

.cs-two-col {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-xl);
    max-width: 900px;
    margin: 0 auto;
    align-items: start;
    max-width: 820px;
    column-gap: calc(var(--spacing-xl) * 1.2);
}

@media (max-width: 840px) {
    .cs-two-col {
        grid-template-columns: 1fr;
    }
}

/* ---------------- FEATURE GRID ---------------- */
.cs-feature-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: var(--spacing-lg);
    max-width: 1100px;
    margin: var(--spacing-lg) auto 0;
}

.cs-feature-grid--three {
    grid-template-columns: repeat(3, 1fr);
}

.cs-feature-grid--two {
  grid-template-columns: repeat(2, 1fr);
}
@media (max-width: 700px) {
  .cs-feature-grid--two {
    grid-template-columns: 1fr;
  }
}

/* Lessons Learned grid: force 1:1 aspect ratio on cards */
#lessons .cs-feature-grid--three .glass-card {
  aspect-ratio: 1 / 1 !important;
  height: auto !important;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

@media (max-width: 900px) {
    .cs-feature-grid--three {
        grid-template-columns: 1fr;
    }
  #lessons .cs-feature-grid--three .glass-card {
    aspect-ratio: auto !important;
  }
}

/* ---------------- GRID REFINEMENTS ---------------- */
.cs-content-grid {
  gap: calc(var(--spacing-lg) * 1.1);
}

.cs-content-block,
.case-study .glass-card {
  background: rgba(var(--white-rgb), 0.32);
  border: 1px solid rgba(var(--white-rgb), 0.16);
  border-radius: var(--radius-md);
  padding: var(--spacing-md) var(--spacing-lg);
  box-shadow: none;
  transition: transform 0.20s ease;
}

.cs-content-block:hover,
.case-study .glass-card:hover {
  transform: translateY(-1px);
  box-shadow: none;
}

/* Stronger card backgrounds for sections with colored gradients */
#execution .glass-card,
#execution .cs-content-block,
#outcomes .glass-card,
#outcomes .cs-content-block,
#lessons .glass-card,
#lessons .cs-content-block,
#challenges .glass-card,
#challenges .cs-content-block {
  background: rgba(var(--white-rgb), 0.72);
  border: 1px solid rgba(var(--white-rgb), 0.55);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

.case-study .glass-card h3,
.cs-content-block h3 {
  font-size: 1.15rem;
  font-weight: 600;
  margin-bottom: var(--spacing-xs);
}

.case-study .glass-card p,
.cs-content-block p {
  font-size: 0.98rem;
  line-height: 1.55;
  margin-top: var(--spacing-xs);
}

/* ---------------- EXECUTION GRID — STACKED CARDS ---------------- */
.cs-execution-grid {
  max-width: 860px;
  margin: var(--spacing-xl) auto;
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spacing-xl);
  align-items: stretch;
}

@media (max-width: 700px) {
  .cs-execution-grid {
    margin: var(--spacing-lg) auto;
    gap: var(--spacing-lg);
  }
}

.cs-execution-grid .glass-card {
  padding: var(--spacing-lg) var(--spacing-xl);
  background: rgba(var(--white-rgb), 0.32);
  border: 1px solid rgba(var(--white-rgb), 0.18);
  border-radius: var(--radius-lg);
  min-height: auto;
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.cs-execution-grid .glass-card h3 {
  font-size: 1.25rem;
  margin-bottom: var(--spacing-xs);
}

.cs-execution-grid .glass-card p {
  font-size: 1rem;
  line-height: 1.55;
}

/* ---------------- IMAGE ROW ---------------- */
.cs-image-row {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-xl);
    max-width: 820px;
    margin: var(--spacing-xl) auto;
}

.cs-image-row img {
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-md);
}

.cs-image-row figcaption {
    margin-top: var(--spacing-sm);
    font-size: 0.85rem;
    color: var(--text-secondary);
    text-align: center;
}

/* ---------------- TESTIMONIALS ---------------- */
.cs-testimonials {
  max-width: 960px;
  margin: var(--spacing-xl) auto;
}

/* 2-column grid: Row 1 = image + quote, Row 2 = wide quote spanning both */
.cs-testimonials-layout {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: var(--spacing-lg);
  align-items: stretch;
}

/* Press release image container */
.cs-testimonials-media {
  display: flex;
  align-items: stretch;
}

.cs-press-release-link {
  display: flex;
  flex-direction: column;
  text-decoration: none;
  transition: transform 0.3s ease;
}

.cs-press-release-link:hover {
  transform: translateY(-4px);
}

.cs-press-release-img {
  width: auto;
  height: 100%;
  max-width: 300px;
  object-fit: contain;
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-12);
  transition: box-shadow 0.3s ease;
}

.cs-press-release-link:hover .cs-press-release-img {
  box-shadow: var(--shadow-20);
}

.cs-press-release-caption {
  display: block;
  margin-top: var(--spacing-sm);
  font-size: 0.85rem;
  color: var(--text-secondary);
  text-align: center;
  transition: color 0.2s ease;
}

.cs-press-release-link:hover .cs-press-release-caption {
  color: var(--primary);
}

/* Wide quote card spans both columns */
.cs-testimonials .rec-card--wide {
  grid-column: 1 / -1;
}

/* Mobile: single column stack */
@media (max-width: 800px) {
  .cs-testimonials-layout {
    grid-template-columns: 1fr;
  }
  
  .cs-testimonials-media {
    justify-content: center;
  }
  
  .cs-press-release-link {
    align-items: center;
  }
  
  .cs-press-release-img {
    width: 100%;
    max-width: 280px;
    height: auto;
  }
  
  .cs-testimonials .rec-card--wide {
    grid-column: 1;
  }
}

.cs-testimonials .rec-card {
  padding: var(--spacing-lg) var(--spacing-xl);
  border-radius: var(--radius-lg);
  position: relative;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  
  /* Explicit glass styling */
  background: rgba(var(--white-rgb), 0.65);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  border: 1px solid rgba(var(--white-rgb), 0.45);
  box-shadow: var(--shadow-06);
}

.cs-testimonials .rec-card .glass-card-inner {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  position: relative;
}

.cs-testimonials .rec-text {
  font-size: 1.05rem;
  line-height: 1.55;
  flex-grow: 1;
  margin-bottom: var(--spacing-lg);
  overflow: auto;
}

.cs-testimonials .rec-meta {
  margin-top: auto;
  padding-top: var(--spacing-sm);
}

.cs-testimonials .rec-author {
  font-weight: 600;
}

.cs-testimonials .rec-role {
  color: var(--text-secondary);
  font-size: 0.9rem;
}

.cs-testimonials .rec-icon {
  position: absolute;
  bottom: var(--spacing-md);
  right: var(--spacing-md);
  opacity: 0.18;
  font-size: 2.5rem;
}

/* ---------------- FOOTER ---------------- */
.cs-footer {
    text-align: center;
    max-width: 700px;
    margin: calc(var(--spacing-2xl) * 1.25) auto;
}

.cs-footer-meta {
    margin-top: var(--spacing-md);
    font-size: 0.9rem;
    color: var(--text-secondary);
}

/* ---------------- SPACING OVERRIDES ---------------- */
.case-study .section {
  padding-top: 0 !important;
  margin-top: 0 !important;
  padding-bottom: var(--spacing-2xl);
  animation: csSectionFade 0.55s ease-out both;
  transition:
    background 0.45s ease,
    padding 0.35s ease,
    box-shadow 0.35s ease;
  position: relative;
}

.case-study .section {
  color: var(--section-text-color, var(--text-primary));
}
.case-study .section p,
.case-study .section li,
.case-study .section h1,
.case-study .section h2,
.case-study .section h3,
.case-study .section h4 {
  color: var(--section-text-color, var(--text-primary));
}
.case-study .section .cs-section-intro,
.case-study .section .cs-section-eyebrow,
.case-study .section .rec-role,
.case-study .section .cs-hero-subtitle,
.case-study .section .cs-footer-meta {
  color: var(--text-secondary);
}
.section {
  border-top: none !important;
}

/* Remove unintended top gap on first section */
.case-study .section:first-of-type {
  padding-top: 0 !important;
  margin-top: 0 !important;
}

/* Smooth transition between tinted + neutral sections */
.case-study .section + .section {
  margin-top: 0 !important;
}


/* === CASE STUDY MINI NAV (5 × 2 GRID) === */
/* ---------------- STATIC TOP NAV CONTAINER ---------------- */
.cs-toc-top {
  max-width: 900px;
  margin: var(--spacing-md) auto var(--spacing-lg);
  position: relative;
  z-index: 20;
}

.cs-toc-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: var(--spacing-md);
  max-width: 900px;
  margin: 0 auto var(--spacing-xl);
  padding: var(--spacing-md) 0;
}

.cs-toc-item {
  text-align: center;
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--text-primary);
  padding: var(--spacing-sm) var(--spacing-xs);
  border-radius: var(--radius-md);
  background: rgba(var(--white-rgb), 0.72);
  border: 1px solid rgba(var(--white-rgb), 0.45);
  backdrop-filter: saturate(150%) blur(18px);
  -webkit-backdrop-filter: saturate(150%) blur(18px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
  text-wrap: balance;
  min-height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.cs-toc-item:hover {
  transform: translateY(-1px);
  box-shadow: none;
}

.cs-toc-item.active {
  background: rgba(var(--primary-rgb), 0.25);
  border-color: rgba(var(--primary-rgb), 0.35);
  transform: translateY(-1px);
}

/* Mobile: 2 columns */
@media (max-width: 800px) {
  .cs-toc-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* ---------------- LIST STYLES ---------------- */
.case-study ul,
.case-study ol {
  margin: var(--spacing-md) auto var(--spacing-lg);
  padding-left: var(--spacing-xl);
  max-width: 800px;
  line-height: 1.55;
  font-size: 1rem;
  color: var(--text-primary);
}

.case-study ul li {
  list-style: disc;
  margin-bottom: var(--spacing-sm);
}

.case-study ol li {
  list-style: decimal;
  margin-bottom: var(--spacing-sm);
}

/* Support nested lists */
.case-study li ul,
.case-study li ol {
  margin-top: var(--spacing-xs);
  margin-bottom: var(--spacing-xs);
  padding-left: var(--spacing-lg);
  opacity: 0.9;
}

/* Paragraph spacing for readability */
.case-study .cs-section-body {
  max-width: 760px;
  margin-left: auto;
  margin-right: auto;
}

/* -------------------------------------------------------------------------- */
/* SLIDESHOW — FIXED HEIGHT, NO LAYOUT SHIFT, CENTERED CONTROLS & CAPTION     */
/* -------------------------------------------------------------------------- */

.slideshow-wrapper {
  max-width: 960px;
  margin: var(--spacing-xl) auto;
  position: relative;
}

.slideshow-frame {
  width: 100%;
  height: 640px;
  position: relative;
  overflow: hidden;
  border-radius: var(--radius-lg);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Each slide */
.slide {
  position: absolute;
  inset: 0;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.45s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.slide.active {
  opacity: 1;
  pointer-events: auto;
}

.slide img {
  max-height: 100%;
  max-width: 92%;
  object-fit: contain;
  border-radius: var(--radius-md);
  cursor: zoom-in;
  margin: 0 auto; /* added */
}

/* Caption — always centered under the fixed frame */
.slideshow-caption {
  text-align: center;
  font-size: 0.95rem;
  color: var(--text-secondary);
  margin-top: var(--spacing-sm);
  min-height: 1.5rem; /* consistent height across slides */
}

/* Controls container */
.slideshow-controls {
  margin-top: var(--spacing-sm);
  display: flex;
  justify-content: center;
  gap: var(--spacing-md);
}

.slideshow-controls button {
  background: var(--white);
  border: 1px solid var(--gray-300);
  border-radius: var(--radius-full);
  padding: 0.5rem 1rem;
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.25s ease;
  box-shadow: var(--shadow-sm);
}

.slideshow-controls button:hover {
  background: var(--surface);
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

/* Lightbox override for slideshow */
.lightbox img {
  max-height: 90vh;
  object-fit: contain;
}

/* -------------------------------------------------------------------------- */
/* LIGHTBOX — FULLSCREEN OVERLAY (FIXES FLOATING IMAGE ISSUE)                 */
/* -------------------------------------------------------------------------- */

.slideshow-lightbox {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.70);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  padding: var(--spacing-lg);
}

.slideshow-lightbox.active {
  display: flex;
}

/* Hide floating TOC when lightbox is open */
.slideshow-lightbox.active ~ .cs-toc--floating,
body:has(.slideshow-lightbox.active) .cs-toc--floating {
  opacity: 0 !important;
  pointer-events: none !important;
}
body:has(.slideshow-lightbox.active) .slideshow-wrapper {
  opacity: 0 !important;
  visibility: hidden !important;
  pointer-events: none !important;
}

/* Fallback: also try targeting via sibling selector */
.slideshow-lightbox.active + .slideshow-wrapper {
  opacity: 0 !important;
  visibility: hidden !important;
  pointer-events: none !important;
}

.slideshow-lightbox-content {
  max-width: 90vw;
  max-height: 90vh;
  text-align: center;
}

.slideshow-lightbox img {
  max-width: 100%;
  max-height: 80vh;
  object-fit: contain;
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-20);
}

.lightbox-caption {
  margin-top: 1rem;
  font-size: 1rem;
  color: white;
  text-align: center;
}

.lightbox-controls {
  display: flex;
  justify-content: center;
  gap: var(--spacing-md);
  margin-top: var(--spacing-md);
}

.lightbox-prev,
.lightbox-next {
  background: rgba(255, 255, 255, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.25);
  color: white;
  font-size: 1.25rem;
  width: 48px;
  height: 48px;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: background 0.2s ease, transform 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.lightbox-prev:hover,
.lightbox-next:hover {
  background: rgba(255, 255, 255, 0.25);
  transform: scale(1.05);
}

.lightbox-prev:active,
.lightbox-next:active {
  transform: scale(0.95);
}

/* -------------------------------------------------------------------------- */
/* SLIDESHOW + LIGHTBOX ANIMATIONS — FADE + BOUNCE                            */
/* -------------------------------------------------------------------------- */

@keyframes csFadeIn {
  0% { opacity: 0; }
  100% { opacity: 1; }
}

@keyframes csBounce {
  0%   { transform: scale(0.96); }
  60%  { transform: scale(1.02); }
  100% { transform: scale(1); }
}

.slide.active img {
  animation: csFadeIn 0.45s ease-out, csBounce 0.45s ease-out;
}

.slideshow-lightbox.active img {
  animation: csFadeIn 0.45s ease-out, csBounce 0.45s ease-out;
}

.no-more {
  animation: csBounce 0.35s ease-out;
}

/* -------------------------------------------------------------------------- */
/* SLIDESHOW — FIRST IMAGE DARK BACKDROP (TRANSPARENT PNG SUPPORT)            */
/* -------------------------------------------------------------------------- */

/* Dark background ONLY for transparent PNG slide */
.transparent-bg {
  background: var(--color-purple-900);
  padding: 1rem;
  border-radius: var(--radius-md);
}

/* Dark background for transparent PNG inside lightbox */
.slideshow-lightbox img.transparent-bg {
  background: var(--color-purple-900);
  padding: 1rem;
  border-radius: var(--radius-md);
}
.slideshow-lightbox img[src*="Transparent"] {
  background: var(--color-purple-900);
  padding: 1rem;
  border-radius: var(--radius-md);
}

/* ---------------- TINT BLUE SECTION ---------------- */

/* ---------------- CHALLENGES TIMELINE — CLEAN TOKEN VERSION ---------------- */

.cs-challenges {
  max-width: 900px;
  margin: var(--spacing-xl) auto 0;
}

.cs-challenges-timeline {
  position: relative;
  margin-top: var(--spacing-xl);
  padding-left: 2.5rem;
}

.cs-challenges-timeline::before {
  content: "";
  position: absolute;
  left: 0.5rem;
  top: 0.5rem;
  bottom: 2rem;
  width: 3px;
  background: linear-gradient(
    to bottom,
    rgba(255, 205, 170, 0.6),
    rgba(255, 205, 170, 0.3)
  );
  border-radius: 2px;
}

.cs-challenge-item {
  position: relative;
  margin-bottom: var(--spacing-xl);
}

.cs-challenge-item:last-child {
  margin-bottom: 0;
}

.cs-challenge-dot {
  position: absolute;
  left: -2.25rem;
  top: 1.5rem;
  width: 14px;
  height: 14px;
  border-radius: 999px;
  background: rgba(255, 205, 170, 0.9);
  border: 3px solid rgba(var(--white-rgb), 0.9);
  box-shadow: 0 0 0 3px rgba(255, 205, 170, 0.3);
  z-index: 2;
}

.cs-challenge-card {
  padding: var(--spacing-lg) var(--spacing-xl);
  border-radius: var(--radius-lg);
  background: rgba(var(--white-rgb), 0.75);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  border: 1px solid rgba(var(--white-rgb), 0.6);
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.cs-challenge-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
}

.cs-challenge-meta {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--text-secondary);
  margin-bottom: var(--spacing-xs);
}

.cs-challenge-title {
  font-size: 1.05rem;
  font-weight: 600;
  margin-bottom: 0.25rem;
  color: var(--text-primary);
}

.cs-challenge-body {
  font-size: 0.98rem;
  line-height: 1.6;
  color: var(--text-secondary);
}

@media (max-width: 800px) {
  .cs-challenges-timeline {
    padding-left: 0;
  }
  /* Hide timeline flourish on mobile/tablet */
  .cs-challenges-timeline::before,
  .cs-challenge-dot {
    display: none;
  }
}

/* ---------------- SECTION ENTRY ANIMATIONS ---------------- */
@keyframes csSectionFade {
  0% { opacity: 0; transform: translateY(12px); }
  100% { opacity: 1; transform: translateY(0); }
}

/* === UNIVERSAL SECTION BACKGROUND SYSTEM (TRANSPARENT TO SHOW BODY GRADIENT) === */
.case-study .section {
  /* Make sections fully transparent so body gradient shows through */
  background: transparent !important;
}

/* Section content must remain transparent so global gradient is visible */
.case-study .section .container,
.case-study .cs-section-body {
  background: transparent !important;
}

/* Ensure section containers are transparent so the global body gradient is visible */
.case-study .section .container,
.case-study .cs-section-body {
  background: transparent !important;
  box-shadow: none !important;
  border: none !important;
}


/* ---------------- METRICS GRID (2-UP) ---------------- */
.cs-metrics-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--spacing-xl);
  max-width: 820px;
  margin: var(--spacing-xl) auto;
}

@media (max-width: 700px) {
  .cs-metrics-grid {
    grid-template-columns: 1fr;
  }
}

/* ---------------- LESSONS GRID (VERTICAL STACK, 1-UP) ---------------- */
.cs-lessons-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--spacing-xl);
  max-width: 1100px;
  margin: var(--spacing-xl) auto;
}

.cs-lessons-grid .glass-card {
  /* Let the card size to content with a comfortable minimum height */
  aspect-ratio: auto;
  min-height: 260px;
  display: flex;
  flex-direction: column;
  justify-content: flex-start; /* content starts near the top */
  align-items: flex-start;     /* left-align text block */
  padding: var(--spacing-lg) var(--spacing-xl);
  text-align: left;
}

.cs-lessons-grid .glass-card h3 {
  margin-bottom: var(--spacing-sm);
}

.cs-lessons-grid .glass-card p {
  margin-top: var(--spacing-xs);
}

/* ---------------- EXECUTION GRID — HERO CENTER ---------------- */
.execution-hero-center {
  grid-template-columns: 1fr 1.15fr 1fr;
}

@media (max-width: 960px) {
  .execution-hero-center {
    grid-template-columns: 1fr;
  }
}

.execution-hero-center .hero-card {
  transform: translateY(-3px);
  box-shadow: 0 8px 24px rgba(0,0,0,0.12);
}

/* ---------------- RECOMMENDATION CARD STYLES ---------------- */
.rec-card {
  padding: var(--spacing-xl);
  border-radius: var(--radius-lg);
  position: relative;
  overflow: hidden;
}

.rec-card .glass-card-inner {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  position: relative;
}

.rec-text {
  font-size: 1.05rem;
  line-height: 1.55;
}

.rec-meta {
  margin-top: var(--spacing-sm);
}

.rec-author {
  font-weight: 600;
}

.rec-role {
  color: var(--text-secondary);
  font-size: 0.9rem;
}

.rec-icon {
  position: absolute;
  bottom: var(--spacing-md);
  right: var(--spacing-md);
  opacity: 0.18;
  font-size: 2.5rem;
}
/* ---------------------------------------------- */
/* FLOATING DESKTOP TOC (RIGHT SIDE NAV)           */
/* ---------------------------------------------- */

@media (min-width: 1100px) {
  .cs-toc--floating {
    position: fixed !important;
    top: 50% !important;
    right: 2rem !important;
    transform: translateY(-50%) !important;
    width: 180px;
    z-index: 2000;

    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);

    /* Premium glass effect */
    background: rgba(var(--white-rgb), 0.18);
    backdrop-filter: blur(22px) saturate(160%);
    -webkit-backdrop-filter: blur(22px) saturate(160%);

    border: 1px solid rgba(var(--white-rgb), 0.28);
    border-radius: var(--radius-lg);

    padding: calc(var(--spacing-md) * 0.9) var(--spacing-md);

    box-shadow:
      inset 0 0 12px rgba(var(--white-rgb), 0.12),
      0 6px 22px rgba(0,0,0,0.14);

    opacity: 0;
    pointer-events: none;
    transition: opacity 0.35s ease, background 0.35s ease, box-shadow 0.35s ease;
  }

  .cs-toc--floating.visible {
    opacity: 1;
    pointer-events: auto;
  }

  .cs-toc--floating .cs-toc-grid {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    margin: 0;
    padding: 0;
  }

  .cs-toc--floating .cs-toc-item {
    min-height: 36px;
    font-size: 0.85rem;
    border-radius: var(--radius-md);
    padding: var(--spacing-xs) var(--spacing-sm);
    text-align: left;
    justify-content: flex-start;
  }
}

/* Hide floating TOC on tablet (between mobile and desktop) */
@media (min-width: 801px) and (max-width: 1099px) {
  .cs-toc--floating {
    display: none !important;
  }
}

/* Hide TOC entirely on mobile */
@media (max-width: 800px) {
  .cs-toc,
  .cs-toc-top,
  .cs-toc--floating {
    display: none !important;
  }
}
/* ---------------------------------------------- */
/* GLOBAL TOP-GAP FIXES + FLOATING TOC VISIBILITY */
/* ---------------------------------------------- */

body.case-study {
  margin: 0 !important;
  padding: 0 !important;
}

.cs-hero.section,
.cs-hero-header {
  margin-top: 0 !important;
  padding-top: 0 !important;
}

/* Prevent TOC section from creating a transform/animation container */
.cs-toc-section {
  animation: none !important;
}
@media (max-width: 900px) {
  .cs-lessons-grid {
    grid-template-columns: 1fr;
  }
  .cs-lessons-grid .glass-card {
    aspect-ratio: auto !important;
    min-height: auto;
    padding: var(--spacing-lg);
    justify-content: flex-start;
    align-items: flex-start;
    text-align: left;
  }
}

/* HARD RESET: remove all unintended vertical gaps between sections */
.case-study .section {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}

/* Tight modern vertical rhythm (Option A) */
.case-study .section + .section {
  padding-top: var(--spacing-lg) !important;
}

/* Removed dark mode section color overrides to use --section-text-color instead. */
/* ============================================================================
   DARK MODE — COLOR STORY VIA CARD ACCENTS
   In dark mode, we flip the strategy: solid dark background + tinted cards
   Each section's glass cards get subtle colored borders and glows
   matching the semantic color story.
   Now using CSS variables defined in styles.css for maintainability.
   ============================================================================ */

@media (prefers-color-scheme: dark) {
  
  /* --- DARK MODE: Solid dark background --- */
  body.case-study {
    background: var(--bg) !important;
  }

  /* --- DARK MODE: Base glass card styling --- */
  .case-study .glass-card,
  .case-study .cs-content-block,
  .case-study .cs-challenge-card {
    background: rgba(25, 28, 35, 0.70) !important;
    border: 1px solid rgba(255, 255, 255, 0.08) !important;
    backdrop-filter: saturate(160%) blur(22px) !important;
    -webkit-backdrop-filter: saturate(160%) blur(22px) !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3) !important;
    transition: 
      transform 0.25s ease,
      border-color 0.3s ease,
      box-shadow 0.3s ease !important;
  }

  .case-study .glass-card:hover,
  .case-study .cs-content-block:hover,
  .case-study .cs-challenge-card:hover {
    transform: translateY(-2px) !important;
    border-color: rgba(255, 255, 255, 0.15) !important;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.35) !important;
  }

  /* --- DARK MODE: Hero metrics card --- */
  .case-study .cs-hero-metrics {
    background: rgba(25, 28, 35, 0.75) !important;
    border: 1px solid rgba(108, 140, 255, 0.3) !important;
    border-top: 2px solid rgba(108, 140, 255, 0.5) !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.35) !important;
  }

  /* --- DARK MODE: Challenges timeline styling --- */
  #challenges .cs-challenges-timeline::before {
    background: rgba(255, 205, 170, 0.3) !important;
  }

  #challenges .cs-challenge-dot {
    background: rgba(255, 205, 170, 0.7) !important;
    box-shadow: 0 0 0 4px rgba(255, 205, 170, 0.15) !important;
  }

  /* --- DARK MODE: TOC styling --- */
  .cs-toc-item {
    background: rgba(30, 33, 40, 0.75) !important;
    border: 1px solid rgba(255, 255, 255, 0.08) !important;
  }

  .cs-toc-item:hover {
    border-color: rgba(255, 255, 255, 0.15) !important;
  }

  .cs-toc-item.active {
    background: rgba(108, 140, 255, 0.15) !important;
    border-color: rgba(108, 140, 255, 0.4) !important;
  }

  /* --- DARK MODE: Floating TOC --- */
  .cs-toc--floating {
    background: rgba(20, 22, 28, 0.90) !important;
    border: 1px solid rgba(255, 255, 255, 0.08) !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.45) !important;
  }

  /* --- DARK MODE: Slideshow controls --- */
  .slideshow-controls button {
    background: rgba(30, 33, 40, 0.85) !important;
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
    color: var(--text-primary) !important;
  }

  .slideshow-controls button:hover {
    background: rgba(40, 44, 52, 0.90) !important;
    border-color: rgba(255, 255, 255, 0.25) !important;
  }

  /* --- DARK MODE: Hero section subtle glow --- */
  .case-study .cs-hero {
    background:
      radial-gradient(
        circle at top,
        rgba(108, 140, 255, 0.08) 0%,
        rgba(108, 140, 255, 0.03) 35%,
        transparent 65%
      ) !important;
  }

  /* --- DARK MODE: Card top-border color accents --- */
  /* Each section's cards get a colored top border to express the color story */
  
  #introduction .glass-card,
  #introduction .cs-content-block {
    border-top: 2px solid rgba(108, 140, 255, 0.5) !important;
  }

  #problem .glass-card,
  #problem .cs-content-block {
    border-top: 2px solid rgba(140, 130, 255, 0.5) !important;
  }

  /* Strategy & Solution - 4 cards, 4 colors */
  #strategy .cs-feature-grid .glass-card:nth-child(1) {
    border-top: 2px solid rgba(108, 140, 255, 0.6) !important;  /* Blue */
  }
  #strategy .cs-feature-grid .glass-card:nth-child(2) {
    border-top: 2px solid rgba(140, 130, 255, 0.6) !important;  /* Blue-Purple */
  }
  #strategy .cs-feature-grid .glass-card:nth-child(3) {
    border-top: 2px solid rgba(164, 140, 249, 0.6) !important;  /* Purple */
  }
  #strategy .cs-feature-grid .glass-card:nth-child(4) {
    border-top: 2px solid rgba(180, 140, 255, 0.6) !important;  /* Deep Purple */
  }

  /* Platform Capabilities - 6 cards, 6 colors */
  #platform .cs-feature-grid .glass-card:nth-child(1) {
    border-top: 2px solid rgba(108, 140, 255, 0.6) !important;  /* Blue */
  }
  #platform .cs-feature-grid .glass-card:nth-child(2) {
    border-top: 2px solid rgba(164, 140, 249, 0.6) !important;  /* Purple */
  }
  #platform .cs-feature-grid .glass-card:nth-child(3) {
    border-top: 2px solid rgba(180, 140, 255, 0.6) !important;  /* Deep Purple */
  }
  #platform .cs-feature-grid .glass-card:nth-child(4) {
    border-top: 2px solid rgba(150, 255, 210, 0.55) !important; /* Mint */
  }
  #platform .cs-feature-grid .glass-card:nth-child(5) {
    border-top: 2px solid rgba(255, 205, 170, 0.55) !important; /* Peach */
  }
  #platform .cs-feature-grid .glass-card:nth-child(6) {
    border-top: 2px solid rgba(255, 235, 140, 0.55) !important; /* Yellow */
  }

  #execution .glass-card,
  #execution .cs-content-block {
    border-top: 2px solid rgba(164, 140, 249, 0.5) !important;
  }

  #outcomes .glass-card,
  #outcomes .cs-content-block {
    border-top: 2px solid rgba(150, 255, 210, 0.5) !important;
  }

  #challenges .glass-card,
  #challenges .cs-content-block,
  #challenges .cs-challenge-card {
    border-top: 2px solid rgba(255, 205, 170, 0.5) !important;
  }

  #lessons .glass-card,
  #lessons .cs-content-block {
    border-top: 2px solid rgba(255, 235, 140, 0.5) !important;
  }

  #testimonials .glass-card,
  #testimonials .cs-content-block,
  #testimonials .rec-card {
    border-top: 2px solid rgba(150, 255, 210, 0.45) !important;
  }

}
